{% extends 'base.html' %}
{% load static %}

{% block title %}Crear Materia{% endblock %}

{% block content %}
<div class="container my-4 d-flex justify-content-center">
    <div class="crear-docente-page p-4 rounded shadow-lg text-center" style="margin-top:100px; margin-bottom:20px;">
        <h2 class="page-title mb-4">
            <i class="fa fa-book me-2"></i> Crear Nueva Materia
        </h2>
        <div class="image-preview-card mb-4">
            <img id="customImagePreview" src="{% static 'images/placeholder2.png' %}" alt="Previsualización" class="docente-img-preview" />
            <p class="text-muted mt-2"><i class="fa fa-camera me-2"></i> Previsualización</p>
        </div>
        <form method="POST" enctype="multipart/form-data" id="customMateriaForm" class="text-start">
            {% csrf_token %}
            <div class="mb-3">
                <label class="form-label"><i class="fa fa-book me-2"></i> Nombre de la Materia</label>
                {{ form.nombre }}
            </div>
            <div class="mb-3">
                <label class="form-label"><i class="fa fa-layer-group me-2"></i> Nivel</label>
                {{ form.nivel }}
            </div>
            <div class="mb-3">
                <label class="form-label"><i class="fa fa-book-open me-2"></i> Créditos</label>
                {{ form.numero_creditos }}
            </div>
            <div class="mb-3">
                <label class="form-label"><i class="fa fa-clock me-2"></i> Horas por Semana</label>
                {{ form.horas_semana }}
            </div>
            <div class="mb-3">
                <label class="form-label"><i class="fa fa-calendar-alt me-2"></i> Jornada</label>
                {{ form.jornada }}
            </div>
            <div class="mb-3">
                <label class="form-label"><i class="fa fa-users me-2"></i> Docentes</label>
                {{ form.docentes }}
            </div>
            <div class="mb-4">
                <label class="form-label"><i class="fa fa-image me-2"></i> Imagen</label>
                {{ form.imagen }}
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-success btn-lg rounded-pill px-4 me-2">
                    <i class="fa fa-save me-2"></i> Guardar Materia
                </button>
                <a href="{% url 'materia:listar_materias' %}" class="btn btn-outline-secondary btn-lg rounded-pill px-4">
                    <i class="fa fa-times me-2"></i> Cancelar
                </a>
            </div>
        </form>
    </div>
</div>

<script>
document.getElementById('id_imagen').addEventListener('change', function(event) {
  const [file] = event.target.files;
  if (file) {
    const preview = document.getElementById('customImagePreview');
    preview.src = URL.createObjectURL(file);
    preview.style.display = 'block';
  }
});
</script>
{% endblock %}